{% extends "base.html" %}

{% block content %}
    <h1> New Post </h1>
    <form action="" method="post" enctype="multipart/form-data"> {% csrf_token %}
        {{form.as_p}}
        <div id="map" style="height: 300px;"></div>
        <script>
            var map = L.map('map').setView([51.505, -0.09], 13);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);
            var marker;
            map.on('click', function(e) {
                if (marker) {
                    map.removeLayer(marker);
                }
                marker = L.marker(e.latlng).addTo(map);
                document.getElementById('id_latitude').value = e.latlng.lat;
                document.getElementById('id_longitude').value = e.latlng.lng;
            });
        </script>
        <input type="submit" value="Save"/>
    </form>
{% endblock content %}
